# Распознаваниие лиц на luckfox или как сдеать курсач по АСВТ за вечер
Тема курсовой работы: "Считыватель (Лицо + Глаза\Зрачки) для СКУД". 
Требуемый результат: система из двух камер, которые направлены перпендикулярно друг другу, чтобы можно было не только определять, есть ли лицо человека в базе, но и сколько людей находится в комнате. 
Это выжимка из инструкции с официального сайта luckfox, немнгочислленных на момент написания гайдов на ютубе и собственных наблюдений. 
# Знай врага в лицо
Нужно понимать, что идти по пути рисовых инноваций - это перформанс по-настоящему сильного и бесстрашного человека, который не боится трудностей и недопонимания со стороны окружающих. Это путь человека, который развил глухоту к аргументам про удобство малинки, автоматически классифицируя их, как белый шум, который полностью отфильтровывается его мозгом. Это путь человека, который не будет тратить все свои накопления на курсач, так как он уже давно спустил все свои накопления. Это путь того, кому не надо что-либо кому-то доказывать, потому что он и сам знает, что он неимоверно крут, по крайней мере до тех пор, пока Раф снова не придумает какие-то доработки для работы и не внесет очередные правки.
## I выбор платы
Так как Андрей Гыязович очень не любит, когда кто-то хочет сделать курсач на raspberry и подобный платах (там уже все давно придумано), он часто предлагает сделать курсовую на плате luckfox (Тут тоже все давно придумано, причем, самими разработчиками luckfox, но, видимо, он об этом еще не знает). Если вы берете ее - приготовьтесь к тому, что взаимодействовать с ней сложнее, чем с условной малинкой (по крайней мере, на первый взгляд), но, если вы решились взять luckfox - сначала надо выбрать какой. В качестве камеры можно использовать какую-нибудь usb камеру или csi камеру от того же luckfox (sc3336). В процессе работы я попробовал pico mini b, pico max и pico pro. На мой субъективный взгляд, самый универсальный вариант - luckfox pico max. У него, отличные характеристики, много пинов GPIO, он греется меньше своих младших братьев (pico pro и pico mini a/b), а также, система, соданная на его основе может быть очень дешевой. Но, в ночи перед сдачей, я успешно убил его, из-за чего мне срочно пришлось искать замену. В ту же ночь, было найдено единственное место в Москве, где можно купить схожую плату pico pro, что я и сделал в утро перед сдачей. Итоговый код работает на каждой из упомянутых плат, так что, можно было сдать и на mini. Есть еще ultra, но она дороже и ее фишки в этой работе абсолютно не нужны.
## II Операционнная система
Официально, на сайте luckfox можно найти 2 операционные системы - buildroot и ubuntu. Конечно, хочется поставить родную ubuntu, но это не путь траера, т.к. ubuntu не поддерживает использование sci камеры. Придется кастрированный buildroot, но, для наших задач и этго хватит с головой.

С официального [сайта](https://wiki.luckfox.com/Luckfox-Pico-Pro-Max/Flash-image) качаем [драйверы](https://files.luckfox.com/wiki/Omni3576/TOOLS/DriverAssitant_v5.13.zip) и программу [SocToolKit](https://files.luckfox.com/wiki/Luckfox-Pico/Software/SocToolKit_v1.98_20240705_01_win.zip) для прошивки, а также, образ [buildroot](https://drive.google.com/drive/folders/1_tR-Rj0fY5y_aLzWKHja7OtaYhUSg_NF?usp=drive_link) с офиициального гугл диска. Теперь, можно прошить плату. ОСь ридется ставить ее на карту памяти, т.к. иначе, код не сможет запуститься на плате, т.к. он занимает достаточно много места в оперативной памяти.
## III Как тебя использовать?
Теперь, после того, как вы поставили ОС на свою плату - можно наконец-то пощупать ее возможности. Подключиться к ней можно по ssh или через adb tools. Также, можно посмотреть изображение с камеры в vlc.
## IV Что дальше?
Теперь у нас есть рабочая плата с рабочей осью, пора написать код для распознавания лиц. Но, есть проблема, а точнее очень много проблем. основное - воообще непонятно, как написать код для распознавания. Можно попросить chatgpt сгенерировать код для распознавания, что нейронка с радостью сделает. Это будет код, который использует библиотеку opencv, находит лица при помощи предобученной модели, по типу, каскада Хаара. Этот код будет рабочим, но, к сожалению, вы не сможете запустить его на плате, из-за массы причин, начиная от вычислительных мощностей паты, заканчивая тем, что на luckfox банально нет полноценной библиотеки opencv. Эх, придется взять готовый код с гитхаба производителей. А я так хотем написать свой соственный код...
## I выбор платы
## I выбор платы
## I выбор платы
## I выбор платы
